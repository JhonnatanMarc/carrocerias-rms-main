import{a as V}from"./chunk-FBJEIJS4.js";import{d as j}from"./chunk-Q4IPOI4K.js";import"./chunk-FLO6WNV7.js";import{$a as h,Cb as E,Ia as T,P as L,U as y,Ua as N,V as x,Va as p,W as g,Wa as f,X as _,Za as b,_a as w,ab as r,bb as o,ca as C,cb as c,gb as S,ib as u,kb as m,ra as F,sb as I,ua as l,ub as d,vb as P,wb as D,xb as M}from"./chunk-HBLK3K2G.js";var B=n=>["/productos",n],$=(n,i)=>i.id;function Q(n,i){if(n&1){let e=S();r(0,"li")(1,"button",13),u("click",function(){let a=y(e).$implicit,s=m();return x(s.selectCategory(a.id))}),d(2),o()()}if(n&2){let e=i.$implicit,t=m();l(),I("active",t.selectedCategoryId()===e.id),l(),D(" ",e.name," ")}}function z(n,i){if(n&1){let e=S();c(0,"div",21),r(1,"button",22),u("click",function(){y(e);let a=m();return x(a.clearFilters())}),d(2," Limpiar filtros "),o()}}function A(n,i){if(n&1&&(r(0,"div",18)(1,"span",23),d(2),o()()),n&2){let e=m();l(2),P(e.getCategoryName(e.selectedCategoryId()))}}function G(n,i){n&1&&(r(0,"div",19),g(),r(1,"svg",24),c(2,"path",25),o(),_(),r(3,"span"),d(4,"No se encontraron productos con los filtros aplicados."),o()())}function H(n,i){if(n&1&&(r(0,"div",26)(1,"figure",27),c(2,"img",28),o(),r(3,"div",29)(4,"div")(5,"span",30),d(6,"PRODUCTO"),o()(),r(7,"h3",31),d(8),o(),r(9,"div",32)(10,"a",33),d(11," M\xE1s Informaci\xF3n "),g(),r(12,"svg",34),c(13,"path",35),o()()()()()),n&2){let e=i.$implicit;l(2),h("src",e.imagePath,F)("alt",e.imageAlt),l(6),P(e.name),l(2),h("routerLink",M(5,B,e.id)),N("aria-label","Ver m\xE1s informaci\xF3n sobre "+e.name)}}function O(n,i){if(n&1&&(r(0,"div",20),b(1,H,14,7,"div",26,$),o()),n&2){let e=m();l(),w(e.displayProducts())}}var k=class n{productImagesService=L(V);searchQuery=C("");selectedCategoryId=C(null);allCategories=this.productImagesService.allCategories;filteredCategories=E(()=>{let i=this.searchQuery().toLowerCase().trim(),e=this.selectedCategoryId(),t=this.allCategories();return!i&&!e?t:t.filter(a=>e&&a.id!==e?!1:i?a.name.toLowerCase().includes(i):!0)});displayProducts=E(()=>{let i=this.filteredCategories(),e=[];for(let t of i)if(t.subcategories)for(let a of t.subcategories)for(let s of a.models){let v=s.images[0];v&&e.push({id:`${t.id}/${a.id}/${s.id}`,name:s.name,categoryId:t.id,subcategoryId:a.id,imagePath:this.productImagesService.getImagePath(t.path,s.folderName,v.fileName,a.path),imageAlt:v.alt})}else if(t.models&&t.models.length>0)for(let a of t.models){let s=a.images[0];s&&e.push({id:`${t.id}/${a.id}`,name:a.name,categoryId:t.id,imagePath:this.productImagesService.getImagePath(t.path,a.folderName,s.fileName),imageAlt:s.alt})}return e});onSearchChange(i){this.searchQuery.set(i)}selectCategory(i){this.selectedCategoryId.set(i)}clearFilters(){this.searchQuery.set(""),this.selectedCategoryId.set(null)}getCategoryName(i){return this.allCategories().find(t=>t.id===i)?.name??""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=T({type:n,selectors:[["app-product-list"]],decls:31,vars:6,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","flex-col","lg:flex-row","gap-6"],[1,"w-full","lg:w-64","shrink-0"],[1,"card","bg-[#ECEFF5]","shadow-lg","mb-6"],[1,"card-body"],[1,"card-title","text-lg","mb-3"],[1,"join","w-full"],["type","text","placeholder","Buscar productos...","aria-label","Buscar productos",1,"input","input-bordered","join-item","w-full",3,"input","value"],["aria-label","Buscar",1,"btn","btn-ghost","bg-bluerms","text-white","join-item"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"card","bg-[#ECEFF5]","shadow-lg"],[1,"menu","menu-compact","p-0"],["type","button",1,"justify-start",3,"click"],[1,"flex-1"],[1,"flex","items-center","gap-4","mb-2"],[1,"h-1","w-16","bg-bluerms","rounded"],[1,"text-2xl","font-semibold"],[1,"mb-6"],[1,"alert","alert-warning"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-6"],[1,"divider","my-2"],["type","button",1,"btn","btn-ghost","bg-bluerms","text-white","w-full",3,"click"],[1,"text-2xl","font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"card","bg-base-100","shadow-xl","hover:shadow-2xl","transition-shadow","duration-300"],[1,"relative","h-64","overflow-hidden"],["loading","lazy",1,"w-full","h-full","object-cover","hover:scale-110","transition-transform","duration-300",3,"src","alt"],[1,"card-body","bg-[#F7F7F7]","gap-0"],[1,"text-gray-500","font-medium"],[1,"card-title","text-bluerms","text-xl"],[1,"card-actions","justify-end","mt-4"],[1,"btn","btn-ghost","bg-bluerms","text-white",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"aside",2)(3,"div",3)(4,"div",4)(5,"h2",5),d(6,"Buscar"),o(),r(7,"div",6)(8,"input",7),u("input",function(s){return t.onSearchChange(s.target.value)}),o(),r(9,"button",8),g(),r(10,"svg",9),c(11,"path",10),o()()()()(),_(),r(12,"div",11)(13,"div",4)(14,"h2",5),d(15,"Categor\xEDas"),o(),r(16,"ul",12)(17,"li")(18,"button",13),u("click",function(){return t.selectCategory(null)}),d(19," Todas las categor\xEDas "),o()(),b(20,Q,3,3,"li",null,$),o(),p(22,z,3,0),o()()(),r(23,"section",14)(24,"div",15),c(25,"div",16),r(26,"h2",17),d(27,"Productos"),o()(),p(28,A,3,1,"div",18),p(29,G,5,0,"div",19)(30,O,3,0,"div",20),o()()()),e&2&&(l(8),h("value",t.searchQuery()),l(10),I("active",t.selectedCategoryId()===null),l(2),w(t.allCategories()),l(2),f(t.searchQuery()||t.selectedCategoryId()?22:-1),l(6),f(t.selectedCategoryId()?28:-1),l(),f(t.displayProducts().length===0?29:30))},dependencies:[j],encapsulation:2,changeDetection:0})};export{k as default};
