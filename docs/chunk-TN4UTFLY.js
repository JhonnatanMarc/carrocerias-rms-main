import{a as O}from"./chunk-VYYKPBXD.js";import{l as f,m as k}from"./chunk-FLO6WNV7.js";import{$a as I,Aa as D,Cb as p,Ia as V,P as m,W as b,X as x,Za as w,_a as S,ab as o,bb as l,ca as g,cb as a,ha as _,ib as y,kb as P,la as C,rb as v,ua as n,ub as d,wb as u}from"./chunk-HBLK3K2G.js";var E=(r,i)=>i.img+"-1",z=(r,i)=>i.img+"-2";function A(r,i){if(r&1&&(o(0,"div",12)(1,"div",13),a(2,"img",14)(3,"div",15),o(4,"div",16),a(5,"span",17),o(6,"h4",18),d(7),l(),o(8,"p",19),d(9),l()()()()),r&2){let e=i.$implicit,t=P();v("width",t.slideWidth(),"%"),n(2),I("ngSrc",e.img)("alt",e.title+" - "+e.category),n(5),u(" ",e.title," "),n(2),u(" ",e.category," ")}}function T(r,i){if(r&1&&(o(0,"div",12)(1,"div",13),a(2,"img",14)(3,"div",15),o(4,"div",16),a(5,"span",17),o(6,"h4",18),d(7),l(),o(8,"p",19),d(9),l()()()()),r&2){let e=i.$implicit,t=P();v("width",t.slideWidth(),"%"),n(2),I("ngSrc",e.img)("alt",e.title+" - "+e.category),n(5),u(" ",e.title," "),n(2),u(" ",e.category," ")}}var M=class r{zone=m(D);platformId=m(C);productService=m(O);elementRef=m(_);intervalId;intersectionObserver;isVisible=g(!1);products=p(()=>{let i=this.productService.categories(),e=[];for(let t of i)if(t.subcategories){let s=t.subcategories[0];if(s&&s.models.length>0){let c=s.models[0],h=c.images[0];if(h){let N=this.productService.getImagePath(t.path,c.folderName,h.fileName,s.path);e.push({img:N,title:t.name,category:t.name})}}}else if(t.models&&t.models.length>0){let s=t.models[0],c=s.images[0];if(c){let h=this.productService.getImagePath(t.path,s.folderName,c.fileName);e.push({img:h,title:t.name,category:t.name})}}return e});currentIndex=g(0);totalProducts=p(()=>this.products().length);visibleProducts=g(4);slideWidth=p(()=>100/this.visibleProducts());maxIndex=p(()=>{let i=this.totalProducts(),e=this.visibleProducts();return i-e});ngOnInit(){f(this.platformId)&&(this.updateVisibleProducts(),window.addEventListener("resize",this.onResize.bind(this)),this.intersectionObserver=new IntersectionObserver(i=>{i.forEach(e=>{e.isIntersecting&&!this.isVisible()?(this.isVisible.set(!0),this.startAutoScroll()):!e.isIntersecting&&this.isVisible()&&(this.isVisible.set(!1),this.stopAutoScroll())})},{threshold:.1}),this.intersectionObserver.observe(this.elementRef.nativeElement))}ngOnDestroy(){this.stopAutoScroll(),f(this.platformId)&&(window.removeEventListener("resize",this.onResize.bind(this)),this.intersectionObserver?.disconnect())}onResize(){this.updateVisibleProducts()}updateVisibleProducts(){if(!f(this.platformId))return;let i=window.innerWidth;i<640?this.visibleProducts.set(1):i<1024?this.visibleProducts.set(2):this.visibleProducts.set(4)}startAutoScroll(){this.stopAutoScroll(),this.intervalId=window.setInterval(()=>{this.zone.run(()=>{this.nextSlide()})},4e3)}stopAutoScroll(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)}nextSlide(){this.stopAutoScroll(),this.currentIndex.update(i=>{let e=this.maxIndex(),t=i+1;return t>e?0:t}),this.startAutoScroll()}prevSlide(){this.stopAutoScroll(),this.currentIndex.update(i=>{let e=this.maxIndex();return i===0?e:i-1}),this.startAutoScroll()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=V({type:r,selectors:[["app-productos-vendidos"]],decls:17,vars:2,consts:[[1,"w-full","py-12","bg-[#F7F7F7]"],[1,"w-full","px-3","md:px-6","lg:px-8","max-11/12","mx-auto"],[1,"mb-6","md:mb-8","lg:mb-12","text-center","font-bold","text-xl","md:text-2xl","lg:text-3xl","xl:text-4xl","text-neutral"],[1,"relative"],["aria-label","Anterior",1,"absolute","left-0","top-1/2","-translate-y-1/2","z-20","bg-bluerms/90","hover:bg-bluerms","text-white","p-2","md:p-3","rounded-full","shadow-lg","transition-all","duration-300","hover:scale-110","-ml-4","md:-ml-6",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","md:h-6","md:w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["aria-label","Siguiente",1,"absolute","right-0","top-1/2","-translate-y-1/2","z-20","bg-bluerms/90","hover:bg-bluerms","text-white","p-2","md:p-3","rounded-full","shadow-lg","transition-all","duration-300","hover:scale-110","-mr-4","md:-mr-6",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"overflow-hidden","w-full","py-6"],[1,"flex","gap-2","md:gap-3","lg:gap-4","transition-transform","duration-500","ease-in-out"],[1,"shrink-0","relative","overflow-hidden","group","cursor-pointer","shadow-lg","rounded-lg",3,"width"],[1,"shrink-0","relative","overflow-hidden","group","cursor-pointer","shadow-lg","rounded-lg"],[1,"relative","w-full","aspect-3/4","h-[450px]","rounded-lg","overflow-hidden"],["fill","","sizes","(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw","loading","lazy",1,"object-cover","transition-transform","duration-500","scale-110","group-hover:scale-100",3,"ngSrc","alt"],[1,"absolute","inset-0","bg-linear-to-t","from-bluerms/80","via-bluerms/50","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],[1,"absolute","bottom-3","left-3","right-3","md:bottom-4","md:left-4","md:right-4","lg:bottom-6","lg:left-6","lg:right-6","z-10","opacity-0","translate-y-4","transition-all","duration-300","group-hover:opacity-100","group-hover:translate-y-0"],[1,"block","w-0","h-0.5","md:h-1","bg-white","transition-all","duration-300","group-hover:w-12","md:group-hover:w-16","lg:group-hover:w-24","mb-2","md:mb-3"],[1,"text-base","sm:text-lg","md:text-xl","lg:text-2xl","font-bold","text-white","mb-0.5","md:mb-1"],[1,"text-xs","sm:text-sm","md:text-base","text-white/90"]],template:function(e,t){e&1&&(o(0,"section",0)(1,"div",1)(2,"h3",2),d(3," NUESTROS PRODUCTOS M\xC1S VENDIDOS "),l(),o(4,"div",3)(5,"button",4),y("click",function(){return t.prevSlide()}),b(),o(6,"svg",5),a(7,"path",6),l()(),x(),o(8,"button",7),y("click",function(){return t.nextSlide()}),b(),o(9,"svg",5),a(10,"path",8),l()(),x(),o(11,"div",9)(12,"div",10),w(13,A,10,6,"div",11,E),w(15,T,10,6,"div",11,z),l()()()()()),e&2&&(n(12),v("transform","translateX(-"+t.currentIndex()*t.slideWidth()+"%)"),n(),S(t.products()),n(2),S(t.products()))},dependencies:[k],encapsulation:2,changeDetection:0})};export{M as ProductosVendidosComponent};
